(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n(2),i=n.n(a),s=n(4),o=n(3),c=n(6),u=n(9),d=n(7),l=n(10),E=n(0),v=n.n(E),m=n(8),p=n.n(m),w=n(1),h=n.n(w),f=function e(){var t=this;Object(o.a)(this,e),this.set=function(e){var n=w.IconBuilder.CallTransactionBuilder,r=e.address,a={friend_msg:e.letter},i=(new n).nid(w.IconConverter.toHex(t.nid)).from(r).to(t.scoreAddress).stepLimit(w.IconConverter.toHex(1e6)).timestamp(w.IconConverter.toHex(1e3*(new Date).getTime())).version(w.IconConverter.toHex(3)).method("write_letter").params(a).build();return console.log(i),i},this.checkTransaction=function(e){return new Promise(function(n){var r;r=setInterval(function(){!function(e){var a=t.iconService.getTransactionResult(e);a?(clearInterval(r),n(a.execute())):(clearInterval(r),alert(a.failure.message))}(e)},5e3)})},this.requestAddress=function(){return new Promise(function(e,t){var n=setTimeout(function(){window.removeEventListener("ICONEX_RELAY_RESPONSE",r,!1),t("timeout")},1e4);function r(t){var a=t.detail,i=a.type,s=a.payload;"RESPONSE_ADDRESS"===i&&(window.removeEventListener("ICONEX_RELAY_RESPONSE",r,!1),clearTimeout(n),e(s))}window.addEventListener("ICONEX_RELAY_RESPONSE",r,!1),window.dispatchEvent(new CustomEvent("ICONEX_RELAY_REQUEST",{detail:{type:"REQUEST_ADDRESS"}}))})},this.requestJsonRpc=function(e){return new Promise(function(t){function n(e){var r=e.detail,a=r.type,i=r.payload;"RESPONSE_JSON-RPC"===a&&(window.removeEventListener("ICONEX_RELAY_RESPONSE",n,!1),t(i))}window.removeEventListener("ICONEX_RELAY_RESPONSE",n,!1),window.addEventListener("ICONEX_RELAY_RESPONSE",n,!1),window.dispatchEvent(new CustomEvent("ICONEX_RELAY_REQUEST",{detail:{type:"REQUEST_JSON-RPC",payload:{jsonrpc:"2.0",method:"icx_sendTransaction",params:e,id:(new Date).getTime()}}}))})};var n=h.a.HttpProvider;this.provider=new n("https://wallet.icon.foundation/api/v3"),this.scoreAddress="cx2c10dd97649157729a9c9d5f20d854b74984699e",this.nid="0x1",this.iconService=new h.a(this.provider)};n(19);n.d(t,"default",function(){return S});var S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onClick=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connect.requestAddress();case 2:(t=e.sent)&&n.setState({address:t});case 4:case"end":return e.stop()}},e)})),n.onChange=function(e){n.setState({letter:e.target.value})},n.onClickSet=Object(s.a)(i.a.mark(function e(){var t,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connect.set(Object(r.a)({},n.state));case 2:return t=e.sent,e.next=5,n.connect.requestJsonRpc(t);case 5:return a=e.sent,e.next=8,n.connect.checkTransaction(a.result);case 8:1===(s=e.sent).status&&s.txHash&&alert("Success!"+s.txHash);case 10:case"end":return e.stop()}},e)})),n.state={address:"",letter:""},n.connect=new f,n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return[v.a.createElement("div",{className:"bg"}),v.a.createElement("div",{className:"container"},v.a.createElement("h1",null,"Dear My Friend"),v.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries."),v.a.createElement("input",{type:"text",onChange:this.onChange,value:this.state.letter}),v.a.createElement("div",null,v.a.createElement("button",{onClick:this.onClick},"Login"),v.a.createElement("button",{onClick:this.onClickSet},"Send")))]}}]),t}(E.Component);p.a.render(v.a.createElement(S,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.68e6844d.chunk.js.map